<div class="card-form-container">
    <div class="card-form-wrapper">
        <div class="card-form-header">
            <h2><i class="bi bi-pencil"></i> Editar Flashcard</h2>
            <p>Atualize o conteúdo do seu flashcard</p>
        </div>

        <form id="card_update" action="<?= route('cards.update', ['id' => $card->id]) ?>" method="post" class="card-form <?= $card->hasErrors() ? 'was-validated' : '' ?>" novalidate>
            <input type="hidden" name="_method" value="PUT">
            <div class="form-group-card">
                <label for="deck_id">
                    <i class="bi bi-collection"></i> Deck
                </label>
                <select
                    class="form-input-card"
                    id="deck_id"
                    name="card[deck_id]"
                    required>
                    <?php foreach ($decks as $deck): ?>
                        <option value="<?= $deck->id ?>" <?= $deck->id == $card->deck_id ? 'selected' : '' ?>>
                            <?= htmlspecialchars($deck->name) ?>
                        </option>
                    <?php endforeach; ?>
                </select>
            </div>

            <div class="form-group-card">
                <label for="front">
                    <i class="bi bi-card-heading"></i> Frente do Card
                </label>
                <textarea
                    class="form-input-card"
                    id="front"
                    name="card[front]"
                    placeholder="Digite a pergunta ou conceito..."
                    maxlength="1000"
                    rows="4"
                    required
                    oninput="updateCharCount('front', 'frontCount', 1000)"><?= htmlspecialchars($card->front ?? '') ?></textarea>
                <div class="invalid-feedback"><?= $card->errors('front') ? $card->errors('front') : '' ?></div>
            </div>

            <div class="form-group-card">
                <label for="back">
                    <i class="bi bi-card-text"></i> Verso do Card
                </label>
                <textarea
                    class="form-input-card"
                    id="back"
                    name="card[back]"
                    placeholder="Digite a resposta ou explicação..."
                    maxlength="1000"
                    rows="4"
                    required
                    oninput="updateCharCount('back', 'backCount', 1000)"><?= htmlspecialchars($card->back ?? '') ?></textarea>
                <div class="invalid-feedback"><?= $card->errors('back') ? $card->errors('back') : '' ?></div>
            </div>

            <div class="form-tip">
                <p>
                    <i class="bi bi-lightbulb"></i>
                    <strong>Dica:</strong> Você pode mover este card para outro deck se necessário!
                </p>
            </div>

            <div class="form-actions-card">
                <a href="<?= route('decks.edit', ['id' => $card->deck_id]) ?>" class="btn-card btn-card-secondary">
                    <i class="bi bi-x-circle"></i> Cancelar
                </a>
                <button type="submit" class="btn-card btn-card-primary">
                    <i class="bi bi-check-circle"></i> Atualizar Card
                </button>
            </div>
        </form>
    </div>
</div>