<div class="card-form-container">
    <div class="card-form-wrapper">
        <div class="card-form-header">
            <h2><i class="bi bi-card-text"></i> Criar Novo Flashcard</h2>
            <p>Adicione um novo card ao seu deck de estudos</p>
        </div>

        <form id="card_create" action="<?= route('cards.create') ?>" method="POST" class="card-form <?= $card->hasErrors() ? 'was-validated' : '' ?>" novalidate>
            <div class="form-group-card">
                <label for="deck_id">
                    <i class="bi bi-collection"></i> Deck
                </label>
                <select
                    class="form-input-card"
                    id="deck_id"
                    name="card[deck_id]"
                    required>
                    <?php foreach ($decks as $deck): ?>
                        <option value="<?= $deck->id ?>"><?= htmlspecialchars($deck->name) ?></option>
                    <?php endforeach; ?>
                </select>
            </div>

            <div class="form-group-card">
                <label for="front">
                    <i class="bi bi-card-heading"></i> Frente do Card
                </label>
                <textarea
                    class="form-input-card <?= ($card->hasErrors() && $card->errors('front')) ? 'is-invalid' : '' ?>"
                    id="front"
                    name="card[front]"
                    placeholder="Digite a pergunta ou conceito..."
                    maxlength="1000"
                    rows="4"
                    required
                    oninput="updateCharCount('front', 'frontCount', 1000)"><?= htmlspecialchars($card->front ?? '') ?></textarea>
                <?php if ($card->hasErrors() && $card->errors('front')): ?>
                    <div class="invalid-feedback" style="display: block !important;"><?= $card->errors('front') ?></div>
                <?php endif; ?>
            </div>

            <div class="form-group-card">
                <label for="back">
                    <i class="bi bi-card-text"></i> Verso do Card
                </label>
                <textarea
                    class="form-input-card <?= ($card->hasErrors() && $card->errors('back')) ? 'is-invalid' : '' ?>"
                    id="back"
                    name="card[back]"
                    placeholder="Digite a resposta ou explicação..."
                    maxlength="1000"
                    rows="4"
                    required
                    oninput="updateCharCount('back', 'backCount', 1000)"><?= htmlspecialchars($card->back ?? '') ?></textarea>
                <?php if ($card->hasErrors() && $card->errors('back')): ?>
                    <div class="invalid-feedback" style="display: block !important;"><?= $card->errors('back') ?></div>
                <?php endif; ?>
            </div>

            <div class="form-tip">
                <p>
                    <i class="bi bi-lightbulb"></i>
                    <strong>Dica:</strong> Seja claro e objetivo. Cards simples são mais fáceis de memorizar!
                </p>
            </div>

            <div class="form-actions-card">
                <a href="/decks" class="btn-card btn-card-secondary">
                    <i class="bi bi-x-circle"></i> Cancelar
                </a>
                <button type="submit" class="btn-card btn-card-primary">
                    <i class="bi bi-check-circle"></i> Adicionar Card
                </button>
            </div>
        </form>
    </div>
</div>